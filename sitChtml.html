<section class="site_creator">
	<nav class="site_creator_nav">
		<a href="#" id="templates_link"><div class="creator_nav">Templates</div></a>
		<a href="#" id="features_link"><div class="creator_nav">Features</div></a>
		<a href="#" id="summary_link"><div class="creator_nav">Summary</div></a>
	</nav>

	<div id="site_creator_main">
		<section id="templates">
			<!-- Insert The Templates, Open a Lightbox of the Image -->
		</section>

		<section id="creator">
			<div id="tools">
				<div id="tool_info">
					<!-- On Hover over a Tool, Present Information about that tool. -->
				</div>
				<div id="toolbox">
					<!-- Inserts all tools via erb -->
					<div class="tool" id="content_page">
						<span>Content Page</span>
						<img src="/assets/icons/content_page" />
					</div>
				</div>
			</div>
			<div id="feature_list">
				<ul class="sortable">
					<li>
						<div id="content_page">
							<h5>Content Page</h5>
							<span class="edit">Edit</span>
							<span class="delete">Delete</span>
						</div>
					</li>
				</ul>
			</div>
		</section>

		<section id="summary">

		</section>
	</div>
</section>

<script>
$(document).ready(function() {

	var currentPath = window.location.pathname;
	var currentTab = "#templates"
	var limitations = {
		contact: 1,
		content_page: 10000,
		external_link: 10000,
		image_gallery: 1,
		introduction: 1,
		rss_feed: 10000,
		social_link: 1
	};

	// Add 'basic_limited' limitations if that is the customer type or if it
	// is a preview session.
	if(currentPath.match(/\/site_creator_preview\/.+/) != null || "<%=j current_customer.customer_type %>" == "basic_limited") {
		limitations.content_page = 3;
		limitations.external_link = 3;
	}

	// Handle the Tabs 
	$("#templates_link, #features_link, #summary_link").click(function(e) {
		e.preventDefault();

		var pathId = "#" + this.id.replace("_link", "");
		if(pathId != currentTab) {
			$(currentTab).hide();
			$(pathId).show();
			currentTab = pathId;
		}
	});

	// Set up the Draggable Elements in the Toolbox
	$("#toolbox").draggable({
		revert: "invalid",
		connectToSortable: "#feature_list",
		helper: "clone"
	});

	// Set up the Sortable List
	$(".sortable").sortable({
		revert: true
	});

});
</script>
